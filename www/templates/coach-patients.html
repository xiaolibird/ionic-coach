<ion-view view-title="现有病人">


<!-- <ion-header-bar>
  <div class="h1 title">现有病人</div>
</ion-header-bar> -->

<!--   <ion-header-bar class="bar-balanced">
    <h2 class="title">Patient List</h2>

    <button class ="button button-icon ion-minus-circled" ng-click ="data.showDelete = !data.showDelete; showReorder = false;"></button>

    <button class ="button button-icon ion-navicon" ng-click ="data.showReorder = !data.showReorder; showDelete = false;"></button>
  </ion-header-bar> -->
  <ion-nav-buttons side="primary">
    <button class="button button-icon ion-minus-circled" ng-click="data.showDelete = !data.showDelete; showReorder = false;">
    </button>
  </ion-nav-buttons>

  <ion-nav-buttons side="secondary">
    <button class="button button-icon ion-navicon" ng-click="data.showReorder = !data.showReorder; showDelete = false;">
    </button>
  </ion-nav-buttons>

  <div class="bar bar-subheader 
    item-input-inset bar-light">
    <label class="item-input-wrapper">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="search" ng-model="query" placeholder="Search">
    </label>
  </div>
<ion-pane>
  <ion-content class="has-subheader">
    <ion-refresher on-refresh="doRefresh()">
    </ion-refresher>
  	
    <ion-list show-delete="data.showDelete" show-reorder="data.showReorder" >
  		
      <ion-item ng-class="{'star': patient.star}"  
      collection-repeat ="patient in patients | filter: query " 
      class ="item-thumbnail-left
      item-icon-right 
      item-text-wrap"  href="#/coach/patients/{{patient.shortname}}">
      
      <img src="img/{{patient.shortname}}_tn.jpg"
        alt="{{ patient.name }} Photo">
  		<h2>{{patient.name}}</h2>
  		<h3>{{patient.reknown}}</h3>
  		<p>{{patient.bio | limitTo: 100  }}  {{ patient.bio.length > 150 ? '&hellip;' : '' }}</p>
      
      <button class="button button-clear icon ion-star button-assertive"
        ng-click="toggleStar(patient)"
        ng-show="patient.star"></button>
      
      <ion-option-button class="button-dark"
        ng-click="toggleStar(patient)">
        <i class="icon ion-star"></i>
      </ion-option-button>      
      
      <ion-delete-button class="ion-minus-circled" ng-click="onItemDelete(patient)">
      </ion-delete-button>      
      
      <ion-reorder-button class="ion-navicon"
        on-reorder="moveItem(patient, $fromIndex, $toIndex)">
      </ion-reorder-button>
  		
      </ion-item>
  	</ion-list>
  </ion-content>
</ion-pane>
</ion-view>